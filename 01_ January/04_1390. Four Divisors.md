# 1390. Four Divisors

<div align="center">

| Problem Link | Difficulty |
| :---: | :---: |
| [Four Divisors](https://leetcode.com/problems/four-divisors/description/) | <img src="https://img.shields.io/badge/Medium-yellow" alt="Medium" /> |

</div>

## üí° Intuition

The problem asks for the sum of divisors for numbers that have exactly four divisors.
A naive approach would be to iterate from 1 to `num` for every number, but that would be inefficient ($O(N \cdot M)$).
We know that divisors appear in pairs (e.g., for 21: 1 & 21, 3 & 7). We only need to iterate up to $\sqrt{num}$ to find all distinct divisors efficiently. If we find a divisor `i`, then `num/i` is also a divisor. If `i == num/i`, it's a perfect square, counting for only one unique divisor.

## üöÄ Approach

1.  Initialize a variable `result` to 0.
2.  Iterate through each integer in the `nums` array.
3.  For each number, calculate the count and sum of its divisors using a helper function `sumIfFourDivisors`:
    * Iterate from `fact = 1` up to $\sqrt{num}$.
    * If `fact` divides `num`:
        * Check if `fact` is equal to `num / fact` (perfect square case). If so, increment divisor count by 1 and add `fact` to the sum.
        * Otherwise, increment count by 2 and add both `fact` and `num / fact` to the sum.
    * Optimization: If at any point the divisor count exceeds 4, stop processing this number and return 0 (as it's invalid).
4.  After the loop, if the divisor count is exactly 4, return the calculated sum; otherwise, return 0.
5.  Add the returned value to `result`.
6.  Return the final `result`.

## ‚è±Ô∏è Complexity

* **Time Complexity:** $O(N \cdot \sqrt{M})$, where $N$ is the number of elements in `nums` and $M$ is the maximum value in `nums` (up to $10^5$). For each number, we iterate up to its square root.
* **Space Complexity:** $O(1)$, as we only use a few variables for counting and summation.

## üíª Solution Code

```cpp
// Intuition: Divisors appear in pairs. We calculate them up to sqrt(num). Valid numbers must have exactly 4 divisors.
// Approach: Iterate 1 to sqrt(num). Collect divisors. If count > 4, break early. If count == 4, return sum.
// Time Complexity: O(N * sqrt(M)) where N is array size and M is max element value.
// Space Complexity: O(1) as we use constant extra space.

class Solution {
public:

    int sumIfFourDivisors(int num) {
        int divisors = 0;
        int sum = 0;

        // Iterate up to square root of num to find factors
        for(int fact = 1; fact * fact <= num; fact++) {
            if(num % fact == 0) {
                int other_fact = num / fact;

                // Handle perfect square case (e.g., 6*6 = 36)
                if(fact == other_fact) {
                    divisors++;
                    sum += fact;
                } else {
                    // Found a pair of divisors
                    divisors += 2;
                    sum += (fact + other_fact);
                }
            }

            // Optimization: If distinct divisors exceed 4, it's invalid
            if (divisors > 4) {
                return 0;
            }
        } 
        // Only return sum if exactly 4 divisors were found
        return divisors == 4 ? sum : 0;
    } 
    
    int sumFourDivisors(vector<int>& nums) {
        int result = 0;
        // Process each number in the array
        for(int &num : nums) {
            result += sumIfFourDivisors(num);
        }
        return result;
    }
};

/*
*
* Dry Run
* Input: nums = [21, 4]
*
* 1. Process num = 21:
* - fact = 1: 21 % 1 == 0. other = 21. Pairs (1, 21). divisors = 2, sum = 22.
* - fact = 2: 21 % 2 != 0.
* - fact = 3: 21 % 3 == 0. other = 7. Pairs (3, 7). divisors = 2+2=4, sum = 22+10=32.
* - fact = 4: 4*4 > 21. Loop ends.
* - divisors is 4. Return sum (32).
* - result = 32.
*
* 2. Process num = 4:
* - fact = 1: 4 % 1 == 0. other = 4. Pairs (1, 4). divisors = 2, sum = 5.
* - fact = 2: 4 % 2 == 0. other = 2. fact == other. divisors = 2+1=3, sum = 5+2=7.
* - fact = 3: 3*3 > 4. Loop ends.
* - divisors is 3 (!= 4). Return 0.
* - result = 32 + 0 = 32.
*
* Final Output: 32
*
*/
```

## üìÑ License

This repository is released under the [MIT License](./LICENSE).

> **This repository and its solutions are provided for educational purposes only and are not intended for commercial use. Please refer to the [LeetCode problem statement](https://leetcode.com/problems/four-divisors/description/) for original content and copyright.**

## üë®‚Äçüíª Author

- [imnilesh18](https://github.com/imnilesh18)